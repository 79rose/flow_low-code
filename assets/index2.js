import{r as j,q as z,B as P,d as S,ak as J,c as R,C as T,o as h,M as D,v as M,x as _,e as t,b as o,N as C,O as W,f as v,u as F,g as Q,J as q,aP as X,aQ as Y,aR as Z,F as ee,a4 as ne,a as H,aS as te,ag as oe,aT as ae}from"./vendor.js";import{s as x,T as a,u as se,L as le}from"./index.js";import{u as ce,a as re}from"./data.js";const ie=()=>{const l=j(x.get(a.THEME,a.LIGHT));function p(e){e?l.value=e:l.value=l.value===a.LIGHT?a.DARK:a.LIGHT,x.set(a.THEME,l.value)}function f(){const e=window.matchMedia("(prefers-color-scheme: dark)"),c=y=>{p(y.matches?a.DARK:a.LIGHT)};return p(e.matches?a.DARK:a.LIGHT),e.addEventListener("change",c),()=>e.removeEventListener("change",c)}function i(){const e=c=>{c.key===x.getKey(a.THEME)&&(l.value=x.get(a.THEME,a.LIGHT))};return window.addEventListener("storage",e),()=>window.removeEventListener("storage",e)}return z(()=>{const e=f(),c=i();return()=>{e(),c()}}),P(l,e=>{document.documentElement.classList.toggle(a.DARK,e===a.DARK)},{immediate:!0}),{theme:l,toggleTheme:p}};function me(){return window.matchMedia("(prefers-reduced-motion: reduce)").matches===!0}const de={class:"flex items-center gap-2 px-4"},ue={class:"mr-auto text-sm flex items-center gap-2"},pe=S({__name:"index",setup(l){const{fields:p,process:f}=ce(),{t:i}=J(),{theme:e,toggleTheme:c}=ie(),{changeLang:y,lang:$}=se(),{readOnly:g,setReadOnly:b}=re(),L=R(()=>e.value===a.DARK),V=R(()=>$.value===le.CHINESE?i("common.lang.chinese"):i("common.lang.english")),A=()=>{b(!g.value)},I=()=>{const n={fields:p,process:f},r=new Blob([JSON.stringify(n)],{type:"application/json"}),m=URL.createObjectURL(r),s=document.createElement("a");s.href=m,s.download="flow.json",s.click(),URL.revokeObjectURL(m)},B=[{command:"zh",text:i("common.lang.chinese")},{command:"en",text:i("common.lang.english")}],G=n=>{y(n)},K=n=>{const r=!L.value;if(!document.startViewTransition||me()){c();return}const m=document.startViewTransition(()=>{c()}),s=(n==null?void 0:n.clientX)??window.innerWidth,d=(n==null?void 0:n.clientY)??0,w=Math.hypot(Math.max(s,innerWidth-s),Math.max(d,innerHeight-d));m.ready.then(()=>{const E=[`circle(0px at ${s}px ${d}px)`,`circle(${w}px at ${s}px ${d}px)`];document.documentElement.animate({clipPath:r?E:[...E].reverse()},{duration:500,easing:"ease-in",pseudoElement:r?"::view-transition-new(root)":"::view-transition-old(root)"})})};return(n,r)=>{const m=q,s=X,d=Y,w=Z,E=T("ArrowDown"),N=ee,k=ne,O=T("Moon"),U=T("Sunny");return h(),D("header",de,[M("div",ue,[M("h2",null,_(n.$t("flow.header.title")),1),M("p",null,_(n.$t("flow.header.description")),1)]),t(w,{onCommand:G,size:"small"},{dropdown:o(()=>[t(d,null,{default:o(()=>[(h(),D(C,null,W(B,u=>t(s,{command:u.command,key:u.text},{default:o(()=>[v(_(u.text),1)]),_:2},1032,["command"])),64))]),_:1})]),default:o(()=>[t(m,{type:"text",size:"small"},{default:o(()=>[v(_(V.value),1)]),_:1})]),_:1}),t(w,null,{dropdown:o(()=>[t(d,null,{default:o(()=>[t(s,{onClick:I},{default:o(()=>[v(_(n.$t("common.export")),1)]),_:1})]),_:1})]),default:o(()=>[t(m,{size:"small",type:"text",plain:""},{default:o(()=>[v(_(n.$t("common.fileOperation"))+" ",1),t(N,{class:"el-icon--right"},{default:o(()=>[t(E)]),_:1})]),_:1})]),_:1}),t(k,{modelValue:F(g),"onUpdate:modelValue":r[0]||(r[0]=u=>Q(g)?g.value=u:null),onClick:A,"inline-prompt":"","active-text":n.$t("common.editableModel"),"inactive-text":n.$t("common.readonlyModel")},null,8,["modelValue","active-text","inactive-text"]),t(k,{modelValue:L.value,"onUpdate:modelValue":r[1]||(r[1]=u=>L.value=u),onClickPassive:K},{"active-action":o(()=>[t(O)]),"inactive-action":o(()=>[t(U)]),_:1},8,["modelValue"])])}}}),ge=S({__name:"index",setup(l){return(p,f)=>{const i=T("router-view");return h(),D(C,null,[t(pe),(h(),H(ae,null,{fallback:o(()=>[]),default:o(()=>[t(i,null,{default:o(({Component:e})=>[t(te,{name:"fade",mode:"out-in"},{default:o(()=>[(h(),H(oe(e)))]),_:2},1024)]),_:1})]),_:1}))],64)}}});export{ge as default};
