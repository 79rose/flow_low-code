const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./vendor.css","./index.css"])))=>i.map(i=>d[i]);
import{d as R,i as le,r as S,c as I,w as Ve,o as y,a as P,b as l,e,f as E,u as b,g as w,E as De,h as Ee,j as de,k as Pe,l as ke,m as at,n as ot,p as ce,q as Le,s as Ce,t as nt,v as U,x as G,y as ze,z as xe,A as J,B as Fe,C as A,D as ae,F as oe,G as je,H as Me,I as Be,J as ne,K as Ne,L as He,M as L,N as M,O as Y,P as ie,Q as ue,R as Ue,S as pe,T as q,U as Ge,V as $e,W as Se,X as Re,Y as se,Z as Ke,_ as me,$ as _e,a0 as ee,a1 as he,a2 as st,a3 as rt,a4 as Ye,a5 as it,a6 as We,a7 as Je,a8 as ut,a9 as dt,aa as W,ab as ct,ac as pt,ad as mt,ae as _t,af as ft,ag as vt,ah as bt,ai as Ze,aj as Qe,ak as ht,al as gt,am as yt,an as Vt,ao as Dt,ap as Et,aq as Pt,ar as kt,as as Ct,at as Ut,au as $t,av as St,aw as Rt}from"./vendor.js";const wt=R({__name:"StartPanel",props:{activeData:{}},setup(n){const{fields:t}=le("flowDesign",{fields:S([])}),a=n,r=S("basicSettings"),o=I({get(){return a.activeData.formProperties.every(d=>d.readonly)},set(d){a.activeData.formProperties.forEach(s=>s.readonly=d),d&&(c.value=!1,u.value=!1)}}),c=I({get(){return a.activeData.formProperties.every(d=>d.hidden)},set(d){a.activeData.formProperties.forEach(s=>s.hidden=d),d&&(u.value=!1,o.value=!1)}}),u=I({get(){return a.activeData.formProperties.every(d=>d.required)},set(d){a.activeData.formProperties.forEach(s=>s.required=d),d&&(o.value=!1,c.value=!1)}}),p=d=>{d.readonly&&(d.required=!1,d.hidden=!1)},_=d=>{d.required&&(d.readonly=!1,d.hidden=!1)},m=d=>{d.hidden&&(d.readonly=!1,d.required=!1)};return Ve(()=>{const d=a.activeData.formProperties;a.activeData.formProperties=t.value.map(s=>({id:s.id,name:s.label,readonly:s.readonly||!1,hidden:s.hidden,required:s.required||!1})),a.activeData.formProperties.forEach(s=>{const i=d.find(h=>h.id===s.id);i&&(s.readonly=i.readonly,s.hidden=i.hidden,s.required=i.required)})}),(d,s)=>{const i=De,h=Ee,v=de,O=Pe,$=ke;return y(),P($,{modelValue:b(r),"onUpdate:modelValue":s[3]||(s[3]=V=>w(r)?r.value=V:null),stretch:"",class:"el-segmented"},{default:l(()=>[e(i,{label:"基础设置",name:"basicSettings"},{default:l(()=>[E(" 暂无 ")]),_:1}),e(i,{label:"表单权限",name:"formPermissions"},{default:l(()=>[e(O,{data:d.activeData.formProperties},{default:l(()=>[e(h,{prop:"name",label:"字段"}),e(h,{prop:"readonly"},{header:l(()=>[e(v,{modelValue:b(o),"onUpdate:modelValue":s[0]||(s[0]=V=>w(o)?o.value=V:null),label:"只读"},null,8,["modelValue"])]),default:l(({row:V})=>[e(v,{modelValue:V.readonly,"onUpdate:modelValue":C=>V.readonly=C,onChange:C=>p(V)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),e(h,{prop:"required"},{header:l(()=>[e(v,{modelValue:b(u),"onUpdate:modelValue":s[1]||(s[1]=V=>w(u)?u.value=V:null),label:"必填"},null,8,["modelValue"])]),default:l(({row:V})=>[e(v,{modelValue:V.required,"onUpdate:modelValue":C=>V.required=C,onChange:C=>_(V)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),e(h,{prop:"hidden"},{header:l(()=>[e(v,{modelValue:b(c),"onUpdate:modelValue":s[2]||(s[2]=V=>w(c)?c.value=V:null),label:"隐藏"},null,8,["modelValue"])]),default:l(({row:V})=>[e(v,{modelValue:V.hidden,"onUpdate:modelValue":C=>V.hidden=C,onChange:C=>m(V)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1})]),_:1},8,["data"])]),_:1})]),_:1},8,["modelValue"])}}}),z=(n,t)=>{const a=n.__vccOpts||n;for(const[r,o]of t)a[r]=o;return a},It=z(wt,[["__scopeId","data-v-ba26b29b"]]),Ot={baseURL:"/api",timeout:8e3};class Tt{constructor(t){this.service=at.create(t),this.service.interceptors.request.use(a=>a,a=>Promise.reject(a)),this.service.interceptors.response.use(a=>{const{data:r}=a;return r},a=>{const{response:r,message:o}=a,c=r==null?void 0:r.data,u=c?c.message:o;return ot.error(u||"未知错误"),Promise.reject((r==null?void 0:r.data)||a)})}get(t,a,r={}){return this.service.get(t,{params:a,...r})}post(t,a,r={}){return this.service.post(t,a,r)}request(t){return this.service.request(t)}download(t,a,r={}){return this.service.post(t,a,{...r,responseType:"blob"})}}const fe=new Tt(Ot),At=n=>fe.get("/user/info",{username:n}),Oe=n=>{const t=n?{userIds:n}:{};return fe.post("/user/list",t)},qt={class:"flex-center",style:{gap:"4px","grid-gap":"4px"}},Lt=R({__name:"UserTag",props:{username:{},type:{default:"info"},closable:{type:Boolean,default:!1}},emits:["close"],setup(n,{emit:t}){const a=n,r=t;let o=ce({username:void 0,avatar:void 0,name:void 0});Le(()=>{if(!a.username)throw new Error("username is required");At(a.username).then(_=>{_.success&&(o.username=_.data.username,o.avatar=_.data.avatar,o.name=_.data.name)})});const c=Ce(),u=I(()=>nt[c.value||"default"]-12),p=()=>{r("close",a.username)};return(_,m)=>{const d=ze,s=xe;return y(),P(s,{round:"",closable:a.closable,type:_.type,effect:"light",onClose:p},{default:l(()=>[U("div",qt,[e(d,{size:b(u),src:b(o).avatar},{default:l(()=>[E(G((b(o).name||_.username).charAt(0)),1)]),_:1},8,["size","src"]),U("span",null,G(b(o).name||_.username),1)])]),_:1},8,["closable","type"])}}}),zt=z(Lt,[["__scopeId","data-v-2ee49825"]]),xt={class:"flex flex-1 flex-items-center flex-justify-between"},Ft={class:"flex-center"},jt=R({__name:"UserPicker",props:{modelValue:{},multiple:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(n,{expose:t,emit:a}){const r={label:"name",children:"children",isLeaf:"leaf",class:g=>s(g)},o=n,u=J(o,"modelValue",a),p=S([]),_=S([]),m=S(),d=S([]),s=g=>p.value.find(D=>D.id===g.id)?"is-active":"",i=g=>{if(g.type==="user")if(o.multiple){const f=p.value.findIndex(D=>D.id===g.id);f===-1?(p.value.push(g),p.value.sort((D,T)=>D.id.localeCompare(T.id))):p.value.splice(f,1)}else{const f=p.value.findIndex(D=>D.id===g.id);f===-1?p.value=[g]:p.value.splice(f,1)}},h=S(!1),v=ce({name:null});Fe(()=>v.name,g=>{var f;(f=m.value)==null||f.filter(g)});const O=(g,f)=>g?f.name.includes(g):!0,$=()=>{h.value=!0},V=()=>{Oe().then(f=>{f.success&&(_.value=f.data.map(D=>({id:D.username,name:D.name,type:"user",leaf:!0,avatar:D.avatar})))});let g=[];Array.isArray(u.value)?g.push(...u.value):u.value&&g.push(u.value),g.length>0?Oe(g).then(f=>{f.success&&(p.value=f.data.map(D=>({id:D.username,name:D.name,avatar:D.avatar,type:"user",leaf:!0})),p.value.sort((D,T)=>D.id.localeCompare(T.id)))}):p.value=[]},C=()=>{o.multiple?u.value=p.value.map(g=>g.id):p.value.length>0?u.value=p.value[0].id:u.value=null,h.value=!1};return t({open:$}),(g,f)=>{const D=ae,T=ze,x=A("School"),Z=oe,te=A("Check"),B=je,N=Me,Q=Be,X=ne,j=Ne;return y(),P(j,{modelValue:b(h),"onUpdate:modelValue":f[2]||(f[2]=F=>w(h)?h.value=F:null),onOpen:V,"align-center":"",draggable:"",title:"选择用户",width:"30%"},{footer:l(()=>[e(X,{onClick:f[1]||(f[1]=F=>h.value=!1)},{default:l(()=>[E("取消")]),_:1}),e(X,{type:"primary",onClick:C},{default:l(()=>[E("确认")]),_:1})]),default:l(()=>[e(Q,{shadow:"never",class:"org-card"},{header:l(()=>[e(D,{modelValue:b(v).name,"onUpdate:modelValue":f[0]||(f[0]=F=>b(v).name=F),placeholder:"输入关键字进行查询",style:{width:"100%"},"suffix-icon":"search",clearable:""},null,8,["modelValue"])]),default:l(()=>[e(N,{tag:"div",class:"org-tree"},{default:l(()=>[e(B,{ref_key:"orgTreeRef",ref:m,"node-key":"id",data:b(_),"default-expanded-keys":b(d),props:r,"filter-node-method":O,onNodeClick:i},{default:l(({data:F})=>[U("div",xt,[U("div",Ft,[F.type==="user"?(y(),P(T,{key:0,size:25,src:F.avatar},{default:l(()=>[E(G(F.name.charAt(0)),1)]),_:2},1032,["src"])):(y(),P(Z,{key:1,size:16},{default:l(()=>[e(x)]),_:1})),E("  "+G(F.name),1)]),e(Z,{class:"is-selected"},{default:l(()=>[e(te)]),_:1})])]),_:1},8,["data","default-expanded-keys"])]),_:1})]),_:1})]),_:1},8,["modelValue"])}}}),Mt=z(jt,[["__scopeId","data-v-50a931b8"]]),Bt={class:"user-wrapper"},Nt=R({__name:"index",props:{modelValue:{},placeholder:{default:"请选择用户"},multiple:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},style:{}},emits:["update:modelValue"],setup(n,{emit:t}){const a=n,o=J(a,"modelValue",t),c=I(()=>o.value?Array.isArray(o.value)?o.value:[o.value]:[]),u=S(),p=He(),_=Ce(),m=I(()=>p.value||a.disabled),d=()=>{var i;(i=u.value)==null||i.open()},s=i=>{o.value&&(a.multiple&&Array.isArray(o.value)?o.value.splice(o.value.indexOf(i),1):o.value=null)};return(i,h)=>{const v=oe,O=ne,$=Ue;return y(),L(M,null,[e(Mt,{ref_key:"userPickerRef",ref:u,multiple:i.multiple,modelValue:b(o),"onUpdate:modelValue":h[0]||(h[0]=V=>w(o)?o.value=V:null)},null,8,["multiple","modelValue"]),U("div",Bt,[e(O,{class:"user-but-item",size:b(_),disabled:b(m),onClick:d,circle:""},{default:l(()=>[e(v,{name:"user"})]),_:1},8,["size","disabled"]),(y(!0),L(M,null,Y(b(c),V=>(y(),P(zt,{closable:!b(m),key:V,username:V,onClose:s},null,8,["closable","username"]))),128)),ie(e($,{class:"placeholder"},{default:l(()=>[E(G(i.placeholder),1)]),_:1},512),[[ue,!b(o)||b(o).length===0]])])],64)}}}),we=z(Nt,[["__scopeId","data-v-a3a4dfc2"]]),Ht=Object.freeze(Object.defineProperty({__proto__:null,default:we},Symbol.toStringTag,{value:"Module"})),Gt=n=>fe.get("/role/info",{id:n}),Te=n=>{const t=n?{roleIds:n}:{};return fe.post("/role/list",t)},Kt={class:"flex-center",style:{gap:"4px","grid-gap":"4px"}},Yt=R({__name:"RoleTag",props:{id:{},type:{default:"info"},closable:{type:Boolean,default:!1}},emits:["close"],setup(n,{emit:t}){const a=n,r=t;let o=ce({id:void 0,name:void 0});Le(()=>{if(!a.id)throw new Error("username is required");Gt(a.id).then(u=>{u.success&&(o.id=u.data.id,o.name=u.data.name)})});const c=()=>{r("close",a.id)};return(u,p)=>{const _=xe;return y(),P(_,{round:"",closable:a.closable,type:u.type,effect:"light",onClose:c},{default:l(()=>[U("div",Kt,[U("span",null,G(b(o).name||u.id),1)])]),_:1},8,["closable","type"])}}}),Wt=z(Yt,[["__scopeId","data-v-61898ea5"]]),Jt={class:"flex flex-1 flex-items-center flex-justify-between"},Zt={class:"flex-center"},Qt=R({__name:"RolePicker",props:{modelValue:{},multiple:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(n,{expose:t,emit:a}){const r={label:"name",children:"children",isLeaf:"leaf",class:g=>s(g)},o=n,u=J(o,"modelValue",a),p=S([]),_=S([]),m=S(),d=S([]),s=g=>p.value.find(D=>D.id===g.id)?"is-active":"",i=g=>{if(o.multiple){const f=p.value.findIndex(D=>D.id===g.id);f===-1?(p.value.push(g),p.value.sort((D,T)=>D.id.localeCompare(T.id))):p.value.splice(f,1)}else{const f=p.value.findIndex(D=>D.id===g.id);f===-1?p.value=[g]:p.value.splice(f,1)}},h=S(!1),v=ce({name:null});Fe(()=>v.name,g=>{var f;(f=m.value)==null||f.filter(g)});const O=(g,f)=>g?f.name.includes(g):!0,$=()=>{h.value=!0},V=()=>{Te().then(f=>{f.success&&(_.value=f.data.map(D=>({id:D.id,name:D.name})))});let g=[];Array.isArray(u.value)?g.push(...u.value):u.value&&g.push(u.value),g.length>0?Te(g).then(f=>{f.success&&(p.value=f.data.map(D=>({id:D.id,name:D.name})),p.value.sort((D,T)=>D.id.localeCompare(T.id)))}):p.value=[]},C=()=>{o.multiple?u.value=p.value.map(g=>g.id):p.value.length>0?u.value=p.value[0].id:u.value=null,h.value=!1};return t({open:$}),(g,f)=>{const D=ae,T=A("School"),x=oe,Z=A("Check"),te=je,B=Me,N=Be,Q=ne,X=Ne;return y(),P(X,{modelValue:b(h),"onUpdate:modelValue":f[2]||(f[2]=j=>w(h)?h.value=j:null),onOpen:V,"align-center":"",draggable:"",title:"选择角色",width:"30%"},{footer:l(()=>[e(Q,{onClick:f[1]||(f[1]=j=>h.value=!1)},{default:l(()=>[E("取消")]),_:1}),e(Q,{type:"primary",onClick:C},{default:l(()=>[E("确认")]),_:1})]),default:l(()=>[e(N,{shadow:"never",class:"org-card"},{header:l(()=>[e(D,{modelValue:b(v).name,"onUpdate:modelValue":f[0]||(f[0]=j=>b(v).name=j),placeholder:"输入关键字进行查询",style:{width:"100%"},"suffix-icon":"search",clearable:""},null,8,["modelValue"])]),default:l(()=>[e(B,{tag:"div",class:"org-tree"},{default:l(()=>[e(te,{ref_key:"orgTreeRef",ref:m,"node-key":"id",data:b(_),"default-expanded-keys":b(d),props:r,"filter-node-method":O,onNodeClick:i},{default:l(({data:j})=>[U("div",Jt,[U("div",Zt,[e(x,{size:16},{default:l(()=>[e(T)]),_:1}),E("  "+G(j.name),1)]),e(x,{class:"is-selected"},{default:l(()=>[e(Z)]),_:1})])]),_:1},8,["data","default-expanded-keys"])]),_:1})]),_:1})]),_:1},8,["modelValue"])}}}),Xt=z(Qt,[["__scopeId","data-v-f82abb2e"]]),el={class:"role-wrapper"},tl=R({__name:"index",props:{modelValue:{},placeholder:{default:"请选择角色"},multiple:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},style:{}},emits:["update:modelValue"],setup(n,{emit:t}){const a=n,o=J(a,"modelValue",t),c=I(()=>o.value?Array.isArray(o.value)?o.value:[o.value]:[]),u=S(),p=He(),_=Ce(),m=I(()=>p.value||a.disabled),d=()=>{var i;(i=u.value)==null||i.open()},s=i=>{o.value&&(a.multiple&&Array.isArray(o.value)?o.value.splice(o.value.indexOf(i),1):o.value=null)};return(i,h)=>{const v=A("Avatar"),O=oe,$=ne,V=Ue;return y(),L(M,null,[e(Xt,{ref_key:"RolePickerRef",ref:u,multiple:i.multiple,modelValue:b(o),"onUpdate:modelValue":h[0]||(h[0]=C=>w(o)?o.value=C:null)},null,8,["multiple","modelValue"]),U("div",el,[e($,{class:"role-but-item",size:b(_),disabled:b(m),onClick:d,circle:""},{default:l(()=>[e(O,null,{default:l(()=>[e(v)]),_:1})]),_:1},8,["size","disabled"]),(y(!0),L(M,null,Y(b(c),C=>(y(),P(Wt,{closable:!b(m),key:C,id:C,onClose:s},null,8,["closable","id"]))),128)),ie(e(V,{class:"placeholder"},{default:l(()=>[E(G(i.placeholder),1)]),_:1},512),[[ue,!b(o)||b(o).length===0]])])],64)}}}),Xe=z(tl,[["__scopeId","data-v-9669776e"]]),ll=Object.freeze(Object.defineProperty({__proto__:null,default:Xe},Symbol.toStringTag,{value:"Module"})),Ie=R({__name:"AssigneePanel",props:{activeData:{},fields:{},type:{}},setup(n){return(t,a)=>{const r=Ge,o=$e,c=Se,u=Re,p=se,_=we,m=Ke,d=me,s=_e,i=Xe,h=ee;return y(),P(h,{"label-position":"top","label-width":"90px"},{default:l(()=>[e(p,{prop:"assigneeType",label:`${t.type}对象`},{default:l(()=>[e(u,{modelValue:t.activeData.assigneeType,"onUpdate:modelValue":a[0]||(a[0]=v=>t.activeData.assigneeType=v)},{default:l(()=>[e(c,null,{default:l(()=>[e(o,{span:8},{default:l(()=>[e(r,{value:"user"},{default:l(()=>[E("指定人员")]),_:1})]),_:1}),e(o,{span:8},{default:l(()=>[e(r,{value:"role"},{default:l(()=>[E("指定角色")]),_:1})]),_:1}),e(o,{span:8},{default:l(()=>[e(r,{value:"choice"},{default:l(()=>[E("发起人自选")]),_:1})]),_:1}),e(o,{span:8},{default:l(()=>[e(r,{value:"self"},{default:l(()=>[E("发起人自己")]),_:1})]),_:1}),e(o,{span:8},{default:l(()=>[e(r,{value:"leader"},{default:l(()=>[E("直属上级")]),_:1})]),_:1}),e(o,{span:8},{default:l(()=>[e(r,{value:"orgLeader"},{default:l(()=>[E("组织主管")]),_:1})]),_:1}),e(o,{span:8},{default:l(()=>[e(r,{value:"formUser"},{default:l(()=>[E("表单内人员")]),_:1})]),_:1}),e(o,{span:8},{default:l(()=>[e(r,{value:"formRole"},{default:l(()=>[E("表单内角色")]),_:1})]),_:1}),pe(t.$slots,"default")]),_:3})]),_:3},8,["modelValue"])]),_:3},8,["label"]),t.activeData.assigneeType==="user"?(y(),P(p,{key:0,prop:"users",label:"指定人员"},{default:l(()=>[e(_,{modelValue:t.activeData.users,"onUpdate:modelValue":a[1]||(a[1]=v=>t.activeData.users=v),multiple:"",placeholder:`请选择${t.type}人`},null,8,["modelValue","placeholder"])]),_:1})):q("",!0),t.activeData.assigneeType==="choice"?(y(),P(p,{key:1,prop:"choice",label:"发起人自选择"},{default:l(()=>[e(u,{modelValue:t.activeData.choice,"onUpdate:modelValue":a[2]||(a[2]=v=>t.activeData.choice=v)},{default:l(()=>[e(m,{value:!1},{default:l(()=>[E("单选")]),_:1}),e(m,{value:!0},{default:l(()=>[E("多选")]),_:1})]),_:1},8,["modelValue"])]),_:1})):q("",!0),t.activeData.assigneeType==="leader"?(y(),P(p,{key:2,prop:"leader",label:"多级上级"},{default:l(()=>[e(s,{modelValue:t.activeData.leader,"onUpdate:modelValue":a[3]||(a[3]=v=>t.activeData.leader=v),style:{width:"220px"},placeholder:"请选择多级上级"},{default:l(()=>[e(d,{label:"直属上级",value:1}),e(d,{label:"2级上级",value:2}),e(d,{label:"3级上级",value:3}),e(d,{label:"4级上级",value:4}),e(d,{label:"5级上级",value:5}),e(d,{label:"6级上级",value:6}),e(d,{label:"7级上级",value:7}),e(d,{label:"8级上级",value:8}),e(d,{label:"9级上级",value:9}),e(d,{label:"10级上级",value:10}),e(d,{label:"11级上级",value:11})]),_:1},8,["modelValue"])]),_:1})):q("",!0),t.activeData.assigneeType==="orgLeader"?(y(),P(p,{key:3,prop:"orgLeader",label:"组织主管"},{default:l(()=>[e(s,{modelValue:t.activeData.orgLeader,"onUpdate:modelValue":a[4]||(a[4]=v=>t.activeData.orgLeader=v),style:{width:"220px"},placeholder:"请选择组织主管"},{default:l(()=>[e(d,{label:"直属主管",value:1}),e(d,{label:"2级主管",value:2}),e(d,{label:"3级主管",value:3}),e(d,{label:"4级主管",value:4}),e(d,{label:"5级主管",value:5}),e(d,{label:"6级主管",value:6}),e(d,{label:"7级主管",value:7}),e(d,{label:"8级主管",value:8}),e(d,{label:"9级主管",value:9}),e(d,{label:"10级主管",value:10}),e(d,{label:"11级主管",value:11})]),_:1},8,["modelValue"])]),_:1})):q("",!0),t.activeData.assigneeType==="role"?(y(),P(p,{key:4,prop:"roles",label:"指定角色"},{default:l(()=>[e(i,{modelValue:t.activeData.roles,"onUpdate:modelValue":a[5]||(a[5]=v=>t.activeData.roles=v),style:{width:"220px"},"collapse-tags":"","max-collapse-tags":1,multiple:"",clearable:"",placeholder:"请选择角色"},null,8,["modelValue"])]),_:1})):q("",!0),t.activeData.assigneeType==="formUser"?(y(),P(p,{key:5,prop:"formUser",label:"表单内人员"},{default:l(()=>[e(s,{placeholder:"选择表单内人员",style:{width:"220px"},modelValue:t.activeData.formUser,"onUpdate:modelValue":a[6]||(a[6]=v=>t.activeData.formUser=v)},{default:l(()=>[(y(!0),L(M,null,Y(t.fields.filter(v=>v.name==="UserSelector"),v=>(y(),P(d,{key:v.id,label:v.label,value:v.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})):q("",!0),t.activeData.assigneeType==="formRole"?(y(),P(p,{key:6,prop:"formRole",label:"表单内角色"},{default:l(()=>[e(s,{placeholder:"选择表单内角色",style:{width:"220px"},modelValue:t.activeData.formRole,"onUpdate:modelValue":a[7]||(a[7]=v=>t.activeData.formRole=v)},{default:l(()=>[(y(!0),L(M,null,Y(t.fields.filter(v=>v.name==="RoleSelector"),v=>(y(),P(d,{key:v.id,label:v.label,value:v.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})):q("",!0)]),_:3})}}}),re=n=>(We("data-v-1b9ca070"),n=n(),Je(),n),al={class:"opt-item"},ol={class:"opt-item__content"},nl=re(()=>U("div",{class:"opt-item__second"},"审批通过，流转到下一个节点",-1)),sl={class:"opt-item"},rl={class:"opt-item__content"},il=re(()=>U("div",{class:"opt-item__second"},"当拒绝任务时，当前任务被终止，并结束整个流程",-1)),ul={class:"opt-item"},dl={class:"opt-item__content"},cl=re(()=>U("div",{class:"opt-item__second"}," 若审批内容存在问题，当前任务将中止并回退至特定历史任务节点 ",-1)),pl={class:"opt-item"},ml={class:"opt-item__content"},_l=re(()=>U("div",{class:"opt-item__second"}," 将当前任务移交给其他人处理，以便他们继续执行所需的操作 ",-1)),fl={class:"opt-item"},vl={class:"opt-item__content"},bl=re(()=>U("div",{class:"opt-item__second"},"将当前任务暂时交由他人处理，待其完成后再交回自己处理",-1)),hl=R({__name:"ApprovalPanel",props:{activeData:{}},setup(n){const{fields:t}=le("flowDesign",{fields:S([]),admin:[]}),a=n,r=he(st),o=S("properties"),c=I({get(){return a.activeData.formProperties.every(s=>s.readonly)},set(s){a.activeData.formProperties.forEach(i=>i.readonly=s),s&&(u.value=!1,p.value=!1)}}),u=I({get(){return a.activeData.formProperties.every(s=>s.hidden)},set(s){a.activeData.formProperties.forEach(i=>i.hidden=s),s&&(p.value=!1,c.value=!1)}}),p=I({get(){return a.activeData.formProperties.every(s=>s.required)},set(s){a.activeData.formProperties.forEach(i=>i.required=s),s&&(c.value=!1,u.value=!1)}}),_=s=>{s.readonly&&(s.required=!1,s.hidden=!1)},m=s=>{s.required&&(s.readonly=!1,s.hidden=!1)},d=s=>{s.hidden&&(s.readonly=!1,s.required=!1)};return Ve(()=>{const s=a.activeData.formProperties;a.activeData.formProperties=t.value.map(i=>({id:i.id,name:i.label,readonly:i.readonly||!1,hidden:i.hidden,required:i.required||!1})),a.activeData.formProperties.forEach(i=>{const h=s.find(v=>v.id===i.id);h&&(i.readonly=h.readonly,i.hidden=h.hidden,i.required=h.required)})}),(s,i)=>{const h=Ge,v=$e,O=Re,$=rt,V=Ue,C=se,g=Se,f=ee,D=De,T=Ee,x=de,Z=Pe,te=A("CircleCheck"),B=oe,N=Ye,Q=A("CircleClose"),X=A("Back"),j=A("Switch"),F=A("UserFilled"),tt=it,lt=ke;return y(),P(lt,{modelValue:b(o),"onUpdate:modelValue":i[12]||(i[12]=k=>w(o)?o.value=k:null),stretch:"",class:"el-segmented"},{default:l(()=>[e(D,{label:"审批人",name:"properties"},{default:l(()=>[e(f,{"label-position":"top","label-width":"90px"},{default:l(()=>[e(Ie,{"active-data":s.activeData,fields:b(t),type:"审批"},{default:l(()=>[e(v,{span:8},{default:l(()=>[e(h,{value:"autoRefuse"},{default:l(()=>[E("自动拒绝")]),_:1})]),_:1})]),_:1},8,["active-data","fields"]),e(C,{prop:"method",label:"多人审批方式"},{default:l(()=>[e(O,{modelValue:s.activeData.multi,"onUpdate:modelValue":i[0]||(i[0]=k=>s.activeData.multi=k),class:"flex-col important-items-start"},{default:l(()=>[e(h,{value:"sequential"},{default:l(()=>[E("依次审批（按顺序审批）")]),_:1}),e(h,{value:"joint"},{default:l(()=>[E("会签（需要所有审批人都通过）")]),_:1}),e(h,{value:"single"},{default:l(()=>[E("或签（其中一名审批人通过即可）")]),_:1})]),_:1},8,["modelValue"]),s.activeData.multi==="joint"?(y(),P(V,{key:0},{default:l(()=>[E(" 需要 "),e($,{modelValue:s.activeData.multiPercent,"onUpdate:modelValue":i[1]||(i[1]=k=>s.activeData.multiPercent=k),min:1,max:100},null,8,["modelValue"]),E(" %人员通过 ")]),_:1})):q("",!0)]),_:1}),e(C,{prop:"nobody",label:"审批人为空"},{default:l(()=>[e(O,{modelValue:s.activeData.nobody,"onUpdate:modelValue":i[2]||(i[2]=k=>s.activeData.nobody=k),class:"w-full"},{default:l(()=>[e(g,null,{default:l(()=>[e(v,{span:12},{default:l(()=>[e(h,{value:"pass"},{default:l(()=>[E("自动通过")]),_:1})]),_:1}),e(v,{span:12},{default:l(()=>[e(h,{value:"assign"},{default:l(()=>[E("指定人员")]),_:1})]),_:1}),e(v,{span:12},{default:l(()=>[e(h,{value:"reject"},{default:l(()=>[E("自动拒绝")]),_:1})]),_:1}),e(v,{span:12},{default:l(()=>[e(h,{value:"admin"},{default:l(()=>[E("转交流程管理员")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),s.activeData.nobody==="assign"?(y(),P(we,{key:0,multiple:"",modelValue:s.activeData.nobodyUsers,"onUpdate:modelValue":i[3]||(i[3]=k=>s.activeData.nobodyUsers=k),placeholder:"指定人员"},null,8,["modelValue"])):q("",!0)]),_:1})]),_:1})]),_:1}),e(D,{label:"表单权限",name:"formPermissions"},{default:l(()=>[e(Z,{data:s.activeData.formProperties},{default:l(()=>[e(T,{prop:"name",label:"字段"}),e(T,{prop:"readonly"},{header:l(()=>[e(x,{modelValue:b(c),"onUpdate:modelValue":i[4]||(i[4]=k=>w(c)?c.value=k:null),label:"只读"},null,8,["modelValue"])]),default:l(({row:k})=>[e(x,{modelValue:k.readonly,"onUpdate:modelValue":K=>k.readonly=K,onChange:K=>_(k)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),e(T,{prop:"required"},{header:l(()=>[e(x,{modelValue:b(p),"onUpdate:modelValue":i[5]||(i[5]=k=>w(p)?p.value=k:null),label:"必填"},null,8,["modelValue"])]),default:l(({row:k})=>[e(x,{modelValue:k.required,"onUpdate:modelValue":K=>k.required=K,onChange:K=>m(k)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),e(T,{prop:"hidden"},{header:l(()=>[e(x,{modelValue:b(u),"onUpdate:modelValue":i[6]||(i[6]=k=>w(u)?u.value=k:null),label:"隐藏"},null,8,["modelValue"])]),default:l(({row:k})=>[e(x,{modelValue:k.hidden,"onUpdate:modelValue":K=>k.hidden=K,onChange:K=>d(k)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1})]),_:1},8,["data"])]),_:1}),e(D,{label:"操作权限",name:"operationPermissions"},{default:l(()=>[e(tt,{fill:"",size:0,direction:"horizontal",spacer:b(r)},{default:l(()=>[U("div",al,[e(B,{size:32,class:"opt-item__icon"},{default:l(()=>[e(te)]),_:1}),U("div",ol,[e(V,{tag:"b"},{default:l(()=>[E(" 同意")]),_:1}),nl]),e(N,{modelValue:s.activeData.operations.complete,"onUpdate:modelValue":i[7]||(i[7]=k=>s.activeData.operations.complete=k),"inline-prompt":"","active-text":"开","inactive-text":"关"},null,8,["modelValue"])]),U("div",sl,[e(B,{size:32,class:"opt-item__icon"},{default:l(()=>[e(Q)]),_:1}),U("div",rl,[e(V,{tag:"b"},{default:l(()=>[E(" 拒绝")]),_:1}),il]),e(N,{modelValue:s.activeData.operations.refuse,"onUpdate:modelValue":i[8]||(i[8]=k=>s.activeData.operations.refuse=k),"inline-prompt":"","active-text":"开","inactive-text":"关"},null,8,["modelValue"])]),U("div",ul,[e(B,{size:32,class:"opt-item__icon"},{default:l(()=>[e(X)]),_:1}),U("div",dl,[e(V,{tag:"b"},{default:l(()=>[E(" 退回")]),_:1}),cl]),e(N,{modelValue:s.activeData.operations.back,"onUpdate:modelValue":i[9]||(i[9]=k=>s.activeData.operations.back=k),"inline-prompt":"","active-text":"开","inactive-text":"关"},null,8,["modelValue"])]),U("div",pl,[e(B,{size:32,class:"opt-item__icon"},{default:l(()=>[e(j)]),_:1}),U("div",ml,[e(V,{tag:"b"},{default:l(()=>[E(" 转交")]),_:1}),_l]),e(N,{modelValue:s.activeData.operations.transfer,"onUpdate:modelValue":i[10]||(i[10]=k=>s.activeData.operations.transfer=k),"inline-prompt":"","active-text":"开","inactive-text":"关"},null,8,["modelValue"])]),U("div",fl,[e(B,{size:32,class:"opt-item__icon"},{default:l(()=>[e(F)]),_:1}),U("div",vl,[e(V,{tag:"b"},{default:l(()=>[E(" 委派")]),_:1}),bl]),e(N,{modelValue:s.activeData.operations.delegate,"onUpdate:modelValue":i[11]||(i[11]=k=>s.activeData.operations.delegate=k),"inline-prompt":"","active-text":"开","inactive-text":"关"},null,8,["modelValue"])])]),_:1},8,["spacer"])]),_:1})]),_:1},8,["modelValue"])}}}),gl=z(hl,[["__scopeId","data-v-1b9ca070"]]),yl=R({__name:"CcPanel",props:{activeData:{}},setup(n){const{fields:t}=le("flowDesign",{fields:S([])}),a=n,r=S("properties"),o=I({get(){return a.activeData.formProperties.every(_=>_.readonly)},set(_){a.activeData.formProperties.forEach(m=>m.readonly=_),_&&(c.value=!1)}}),c=I({get(){return a.activeData.formProperties.every(_=>_.hidden)},set(_){a.activeData.formProperties.forEach(m=>m.hidden=_),_&&(o.value=!1)}}),u=_=>{_.readonly&&(_.hidden=!1)},p=_=>{_.hidden&&(_.readonly=!1)};return Ve(()=>{const _=a.activeData.formProperties;a.activeData.formProperties=t.value.map(m=>({id:m.id,name:m.label,readonly:m.readonly||!1,hidden:m.hidden,required:m.required||!1})),a.activeData.formProperties.forEach(m=>{const d=_.find(s=>s.id===m.id);d&&(m.readonly=d.readonly,m.hidden=d.hidden,m.required=d.required)})}),(_,m)=>{const d=ee,s=De,i=Ee,h=de,v=Pe,O=ke;return y(),P(O,{modelValue:b(r),"onUpdate:modelValue":m[2]||(m[2]=$=>w(r)?r.value=$:null),stretch:"",class:"el-segmented"},{default:l(()=>[e(s,{label:"抄送人",name:"properties"},{default:l(()=>[e(d,{"label-position":"top","label-width":"90px"},{default:l(()=>[e(Ie,{"active-data":_.activeData,fields:b(t),type:"抄送"},null,8,["active-data","fields"])]),_:1})]),_:1}),e(s,{label:"表单权限",name:"formPermissions"},{default:l(()=>[e(v,{data:_.activeData.formProperties},{default:l(()=>[e(i,{prop:"name",label:"字段"}),e(i,{prop:"readonly"},{header:l(()=>[e(h,{modelValue:b(o),"onUpdate:modelValue":m[0]||(m[0]=$=>w(o)?o.value=$:null),label:"只读"},null,8,["modelValue"])]),default:l(({row:$})=>[e(h,{modelValue:$.readonly,"onUpdate:modelValue":V=>$.readonly=V,onChange:V=>u($)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1}),e(i,{prop:"hidden"},{header:l(()=>[e(h,{modelValue:b(c),"onUpdate:modelValue":m[1]||(m[1]=$=>w(c)?c.value=$:null),label:"隐藏"},null,8,["modelValue"])]),default:l(({row:$})=>[e(h,{modelValue:$.hidden,"onUpdate:modelValue":V=>$.hidden=V,onChange:V=>p($)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:1})]),_:1},8,["data"])]),_:1})]),_:1},8,["modelValue"])}}}),Vl=z(yl,[["__scopeId","data-v-c87cab50"]]),Dl=R({__name:"TimerPanel",props:{activeData:{}},setup(n){return(t,a)=>{const r=Ke,o=Re,c=se,u=me,p=_e,_=ae,m=ut,d=ee;return y(),P(d,{"label-position":"top"},{default:l(()=>[e(c,{prop:"waitType",label:"等待方式"},{default:l(()=>[e(o,{modelValue:t.activeData.waitType,"onUpdate:modelValue":a[0]||(a[0]=s=>t.activeData.waitType=s)},{default:l(()=>[e(r,{label:"固定时长",value:"duration"}),e(r,{label:"固定时间",value:"date"})]),_:1},8,["modelValue"])]),_:1}),t.activeData.waitType==="duration"?(y(),P(c,{key:0,prop:"duration",label:"等待时长"},{default:l(()=>[e(_,{modelValue:t.activeData.duration,"onUpdate:modelValue":a[2]||(a[2]=s=>t.activeData.duration=s),modelModifiers:{number:!0},min:0,max:9999999,type:"number",style:{"max-width":"230px"},class:"input-with-select"},{append:l(()=>[e(p,{modelValue:t.activeData.unit,"onUpdate:modelValue":a[1]||(a[1]=s=>t.activeData.unit=s),placeholder:"Select",style:{width:"80px"}},{default:l(()=>[e(u,{label:"秒",value:"PT%sS"}),e(u,{label:"分钟",value:"PT%sM"}),e(u,{label:"小时",value:"PT%sH"}),e(u,{label:"天",value:"P%sD"}),e(u,{label:"周",value:"P%sW"}),e(u,{label:"月",value:"P%sM"})]),_:1},8,["modelValue"])]),_:1},8,["modelValue"])]),_:1})):q("",!0),t.activeData.waitType==="date"?(y(),P(c,{key:1,prop:"duration",label:"指定时间"},{default:l(()=>[e(m,{modelValue:t.activeData.timeDate,"onUpdate:modelValue":a[3]||(a[3]=s=>t.activeData.timeDate=s),type:"datetime",format:"YYYY-MM-DD HH:mm:ss","value-format":"YYYY-MM-DD HH:mm:ss",placeholder:"请选择等待时间"},null,8,["modelValue"])]),_:1})):q("",!0)]),_:1})}}}),El=U("div",{class:"flex-items-center gap3px"},[U("span",null,"消息主题")],-1),Pl=U("div",{class:"flex-items-center gap3px"},[U("span",null,"消息内容")],-1),kl=R({__name:"NotifyPanel",props:{activeData:{}},setup(n){const{fields:t}=le("flowDesign",{fields:S([])});return(a,r)=>{const o=de,c=dt,u=se,p=ae,_=ee;return y(),P(_,{"label-position":"top","label-width":"90px"},{default:l(()=>[e(Ie,{"active-data":a.activeData,fields:b(t),type:"通知"},null,8,["active-data","fields"]),e(u,{prop:"types",label:"通知类型"},{default:l(()=>[e(c,{modelValue:a.activeData.types,"onUpdate:modelValue":r[0]||(r[0]=m=>a.activeData.types=m)},{default:l(()=>[e(o,{label:"站内",value:"site"}),e(o,{label:"邮件",value:"email"}),e(o,{label:"短信",value:"sms"}),e(o,{label:"企业微信",value:"wechat"}),e(o,{label:"钉钉",value:"dingtalk"}),e(o,{label:"飞书",value:"feishu"})]),_:1},8,["modelValue"])]),_:1}),e(u,{prop:"subject",label:"消息主题"},{label:l(()=>[El]),default:l(()=>[e(p,{modelValue:a.activeData.subject,"onUpdate:modelValue":r[1]||(r[1]=m=>a.activeData.subject=m),maxlength:255,clearable:"",placeholder:"请输入消息主题"},null,8,["modelValue"])]),_:1}),e(u,{prop:"content",label:"消息内容"},{label:l(()=>[Pl]),default:l(()=>[e(p,{modelValue:a.activeData.content,"onUpdate:modelValue":r[2]||(r[2]=m=>a.activeData.content=m),autosize:{minRows:6,maxRows:8},type:"textarea",maxlength:1e3,"show-word-limit":"",placeholder:"请输入消息内容"},null,8,["modelValue"])]),_:1})]),_:1})}}}),Cl=R({__name:"Trigger",props:{modelValue:{},options:{},filterRules:{}},emits:["update:modelValue"],setup(n,{emit:t}){const a=n,o=J(a,"modelValue",t);return(c,u)=>{const p=me,_=_e;return y(),P(_,{class:"trigger-container",modelValue:b(o),"onUpdate:modelValue":u[0]||(u[0]=m=>w(o)?o.value=m:null),filterable:"",placeholder:"选择字段"},{default:l(()=>[(y(!0),L(M,null,Y(a.options,m=>(y(),P(p,{key:m.id,label:m.label,value:m.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])}}}),Ul=R({__name:"Operator",props:{modelValue:{}},emits:["update:modelValue"],setup(n,{emit:t}){const a=n,r=[{value:"eq",label:"等于"},{value:"ne",label:"不等于"},{label:"包含",value:"in"},{label:"不包含",value:"ni"}],c=J(a,"modelValue",t);return(u,p)=>{const _=me,m=_e;return y(),P(m,{class:"operator-container",modelValue:b(c),"onUpdate:modelValue":p[0]||(p[0]=d=>w(c)?c.value=d:null),filterable:"",placeholder:"筛选符"},{default:l(()=>[(y(),L(M,null,Y(r,d=>e(_,{key:d.value,label:d.label,value:d.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])}}}),$l=z(Ul,[["__scopeId","data-v-e18b626f"]]),Sl=function(){const t=typeof document<"u"&&document.createElement("link").relList;return t&&t.supports&&t.supports("modulepreload")?"modulepreload":"preload"}(),Rl=function(n,t){return new URL(n,t).href},Ae={},H=function(t,a,r){let o=Promise.resolve();if(a&&a.length>0){const c=document.getElementsByTagName("link"),u=document.querySelector("meta[property=csp-nonce]"),p=(u==null?void 0:u.nonce)||(u==null?void 0:u.getAttribute("nonce"));o=Promise.all(a.map(_=>{if(_=Rl(_,r),_ in Ae)return;Ae[_]=!0;const m=_.endsWith(".css"),d=m?'[rel="stylesheet"]':"";if(!!r)for(let h=c.length-1;h>=0;h--){const v=c[h];if(v.href===_&&(!m||v.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${_}"]${d}`))return;const i=document.createElement("link");if(i.rel=m?"stylesheet":Sl,m||(i.as="script",i.crossOrigin=""),i.href=_,p&&i.setAttribute("nonce",p),document.head.appendChild(i),m)return new Promise((h,v)=>{i.addEventListener("load",h),i.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${_}`)))})}))}return o.then(()=>t()).catch(c=>{const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=c,window.dispatchEvent(u),!u.defaultPrevented)throw c})},wl=R({props:{modelValue:{type:[String,Number,Boolean,Array,Object],default:void 0,required:!1},field:{type:Object,required:!0}},emits:["update:modelValue"],components:{ElInput:W(()=>H(async()=>{const{ElInput:n}=await import("./vendor.js").then(t=>t.aV);return{ElInput:n}},__vite__mapDeps([0]),import.meta.url).then(({ElInput:n})=>n)),ElInputNumber:W(()=>H(async()=>{const{ElInputNumber:n}=await import("./vendor.js").then(t=>t.aV);return{ElInputNumber:n}},__vite__mapDeps([0]),import.meta.url).then(({ElInputNumber:n})=>n)),ElSelect:W(()=>H(async()=>{const{ElSelect:n}=await import("./vendor.js").then(t=>t.aV);return{ElSelect:n}},__vite__mapDeps([0]),import.meta.url).then(({ElSelect:n})=>n)),ElRadio:W(()=>H(async()=>{const{ElRadio:n}=await import("./vendor.js").then(t=>t.aV);return{ElRadio:n}},__vite__mapDeps([0]),import.meta.url).then(({ElRadio:n})=>n)),ElCheckbox:W(()=>H(async()=>{const{ElCheckbox:n}=await import("./vendor.js").then(t=>t.aV);return{ElCheckbox:n}},__vite__mapDeps([0]),import.meta.url).then(({ElCheckbox:n})=>n)),UserSelector:W(()=>H(()=>Promise.resolve().then(()=>Ht),void 0,import.meta.url)),RoleSelector:W(()=>H(()=>Promise.resolve().then(()=>ll),void 0,import.meta.url))},setup(n,{emit:t}){return{buildProps:o=>{const c={},u=o.props||{};return Object.keys(u).forEach(p=>{c[p]=u[p]}),n.modelValue!==void 0?c.modelValue=n.modelValue:c.modelValue=o.value,c["onUpdate:modelValue"]=p=>{t("update:modelValue",p)},delete c.options,c},buildSlots:o=>{const c={},p={ElSelect:_=>_.props.options.map(m=>e(A("el-option"),{label:m.label,value:m.value},null)),ElRadio:_=>_.props.options.map(m=>e(A("el-radio"),{label:m.value},{default:()=>[m.label]})),ElCheckbox:_=>_.props.options.map(m=>e(A("el-checkbox"),{label:m.value},{default:()=>[m.label]}))}[o.name];return p&&(c.default=()=>p(o)),c}}},render(){const n=ct.cloneDeep(this.field),t=this.buildSlots(n),a=this.buildProps(n),r=A(n.name);return typeof r=="string"?he(r,a,t):he(r,a,t)}}),Il=n=>(We("data-v-b35f21bc"),n=n(),Je(),n),Ol={class:"filter-container"},Tl={class:"logical-operator"},Al=Il(()=>U("div",{class:"logical-operator__line"},null,-1)),ql={class:"filter-option-content"},Ll={key:0,class:"filter-item-rule"},zl={class:"filter-item-rule"},xl=R({name:"AdvancedFilter"}),Fl=R({...xl,props:{filterFields:{},modelValue:{}},emits:["update:modelValue","addCondition","delCondition","delGroup"],setup(n,{emit:t}){const a=n,r=t,o=J(a,"modelValue",r),c=()=>{o.value.conditions.push({field:null,operator:"eq",value:null})},u=m=>{o.value.conditions.splice(m,1),o.value.conditions.length<=0&&r("delGroup"),r("delCondition",m)},p=()=>{o.value.groups.push({operator:"and",conditions:[{field:null,operator:"",value:null}],groups:[]})},_=m=>{o.value.groups.splice(m,1)};return(m,d)=>{const s=Ye,i=se,h=$e,v=ne,O=Se,$=A("AdvancedFilter"),V=ee;return y(),L("div",Ol,[U("div",Tl,[Al,e(s,{modelValue:b(o).operator,"onUpdate:modelValue":d[0]||(d[0]=C=>b(o).operator=C),"inline-prompt":"",style:{"--el-switch-on-color":"#409eff","--el-switch-off-color":"#67c23a"},"active-value":"and","inactive-value":"or","active-text":"且","inactive-text":"或"},null,8,["modelValue"])]),U("div",ql,[e(V,{"label-width":0,inline:!0,model:b(o)},{default:l(()=>[(y(!0),L(M,null,Y(b(o).conditions,(C,g)=>(y(),P(O,{key:`${C.field}-${g}`,gutter:5,class:"filter-item-rule"},{default:l(()=>[e(h,{xs:24,sm:7},{default:l(()=>[e(i,{prop:"conditions."+g+".field",style:{width:"100%"}},{default:l(()=>[e(Cl,{ref_for:!0,ref:"triggerRef",options:a.filterFields.filter(f=>f.value!==void 0),"filter-rules":b(o),modelValue:C.field,"onUpdate:modelValue":[f=>C.field=f,f=>C.value=null]},null,8,["options","filter-rules","modelValue","onUpdate:modelValue"])]),_:2},1032,["prop"])]),_:2},1024),C.field?(y(),P(h,{key:0,xs:24,sm:5},{default:l(()=>[e(i,{prop:"conditions."+g+".operator",style:{width:"100%"}},{default:l(()=>[e($l,{ref_for:!0,ref:"operatorRef",modelValue:C.operator,"onUpdate:modelValue":f=>C.operator=f},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1032,["prop"])]),_:2},1024)):q("",!0),C.field?(y(),P(h,{key:1,xs:24,sm:10},{default:l(()=>[e(i,{prop:"conditions."+g+".value",style:{width:"100%"}},{default:l(()=>[e(b(wl),{field:a.filterFields.find(f=>f.id===C.field),modelValue:C.value,"onUpdate:modelValue":f=>C.value=f},null,8,["field","modelValue","onUpdate:modelValue"])]),_:2},1032,["prop"])]),_:2},1024)):q("",!0),e(h,{xs:24,sm:2,style:{display:"flex","align-items":"center","flex-direction":"row-reverse"}},{default:l(()=>[e(v,{plain:"",circle:"",type:"danger",icon:"Delete",onClick:f=>u(g)},null,8,["onClick"])]),_:2},1024)]),_:2},1024))),128)),(y(!0),L(M,null,Y(b(o).groups,(C,g)=>(y(),P($,{key:g,onDelGroup:f=>_(g),modelValue:b(o).groups[g],"onUpdate:modelValue":f=>b(o).groups[g]=f,filterFields:m.filterFields},{default:l(()=>[e(v,{onClick:f=>_(g),icon:"CircleClose",class:"filter-filter-item__add"},{default:l(()=>[E(" 删除条件组 ")]),_:2},1032,["onClick"])]),_:2},1032,["onDelGroup","modelValue","onUpdate:modelValue","filterFields"]))),128)),b(o).groups.length===0&&b(o).conditions.length===0?(y(),L("div",Ll)):q("",!0)]),_:1},8,["model"]),U("div",zl,[e(v,{onClick:c,icon:"CirclePlus",class:"filter-filter-item__add"},{default:l(()=>[E(" 添加条件 ")]),_:1}),e(v,{onClick:p,icon:"CirclePlus",class:"filter-filter-item__add"},{default:l(()=>[E(" 添加条件组 ")]),_:1}),pe(m.$slots,"default",{},void 0,!0)])])])}}}),jl=z(Fl,[["__scopeId","data-v-b35f21bc"]]),Ml=R({__name:"ConditionPanel",props:{activeData:{}},setup(n){const{fields:t}=le("flowDesign",{fields:S([])}),a=S([{id:"initiator",name:"UserSelector",type:"formItem",label:"发起人",value:null,readonly:!1,required:!0,hidden:!1,props:{key:void 0,multiple:!1,placeholder:"请选择发起人",class:[],style:{width:"100%"}}}]);return(r,o)=>{const c=jl;return y(),P(c,{modelValue:r.activeData.conditions,"onUpdate:modelValue":o[0]||(o[0]=u=>r.activeData.conditions=u),"filter-fields":[...b(a),...b(t)]},null,8,["modelValue","filter-fields"])}}}),Bl=["id"],Nl=R({__name:"index",props:pt({activeData:{}},{modelValue:{type:Boolean,required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(n){const t=mt(n,"modelValue"),a={start:It,approval:gl,cc:Vl,timer:Dl,notify:kl,condition:Ml},r=S(!1),o=()=>{r.value&&(r.value=!1)};return(c,u)=>{const p=ae,_=bt,m=Ze;return y(),P(m,{modelValue:t.value,"onUpdate:modelValue":u[2]||(u[2]=d=>t.value=d),size:"35%"},{header:l(({titleId:d,titleClass:s})=>[U("span",{id:d,class:_t(s)},[ie(e(p,{onBlur:o,maxlength:"30",modelValue:c.activeData.name,"onUpdate:modelValue":u[0]||(u[0]=i=>c.activeData.name=i)},null,8,["modelValue"]),[[b(ft),o],[ue,b(r)]]),ie(e(_,{icon:"EditPen",onClick:u[1]||(u[1]=i=>r.value=!0)},{default:l(()=>{var i;return[E(G(((i=c.activeData)==null?void 0:i.name)||c.$t("form.nodeSetting")),1)]}),_:1},512),[[ue,!b(r)]])],10,Bl)]),default:l(()=>[(y(),P(vt(a[c.activeData.type]),{activeData:c.activeData},null,8,["activeData"]))]),_:1},8,["modelValue"])}}}),Hl=z(Nl,[["__scopeId","data-v-06cae41f"]]),Gl=(n=!1)=>{const t=S(n);return{isOpen:t,open:()=>{t.value=!0},close:()=>{t.value=!1}}},Kl=Qe("panel",()=>{const{isOpen:n,open:t,close:a}=Gl(),r=S([]);return{isOpen:n,open:t,close:a,currentPanel:r,setCurrentPanel:c=>{r.value=Array.isArray(c)?c:[c]}}}),Yl=()=>{const n=Kl(),t=c=>{n.open(),n.setCurrentPanel(c)},a=()=>{n.close()},r=I(()=>n.currentPanel);return{isOpen:I(()=>n.isOpen),openPanel:t,closePanel:a,currentPanel:r}},Wl=R({__name:"Provider",setup(n){const{isOpen:t}=Yl();return(a,r)=>{const o=Ze;return y(),L("div",null,[e(o,{modelValue:b(t),"onUpdate:modelValue":r[0]||(r[0]=c=>w(t)?t.value=c:null),size:"35%"},{default:l(()=>[e(Hl)]),_:1},8,["modelValue"]),pe(a.$slots,"default")])}}}),Jl=R({__name:"Application",setup(n){return(t,a)=>(y(),P(Wl,null,{default:l(()=>[pe(t.$slots,"default")]),_:3}))}}),Zl={CHINESE:"zh",ENGLISH:"en"},Ua={LIGHT:"light",DARK:"dark",THEME:"theme"},Ql=60*60*24*7;class Xl{constructor(t="",a=localStorage){this.storage=a,this.prefixKey=t}getKey(t){return`${this.prefixKey}${t}`.toUpperCase()}set(t,a,r=Ql){const o=JSON.stringify({value:a,expire:r!==null?new Date().getTime()+r*3600:null});this.storage.setItem(this.getKey(t),o)}get(t,a=null){const r=this.storage.getItem(this.getKey(t));if(r)try{const o=JSON.parse(r),{value:c,expire:u}=o;if(u===null||u>=Date.now())return c;this.remove(t)}catch{return a}return a}remove(t){this.storage.removeItem(this.getKey(t))}clear(){this.storage.clear()}}const ge=new Xl("flow-low-code_"),ea=Qe("app",()=>{const n=S(ge.get("lang",navigator.language)),t=S(!1);return{lang:n,setLang:o=>{n.value=o,ge.set("lang",o)},readOnly:t,setReadOnly:o=>{t.value=o}}}),ta=()=>{const n=ea(),{locale:t}=ht(),a=I(()=>n.lang),{setLang:r}=n;return{changeLang:c=>{t.value=c,r(c)},lang:a}},la=R({__name:"App",setup(n){const{lang:t}=ta(),a=I(()=>t.value===Zl.CHINESE?gt:yt);return(r,o)=>{const c=A("RouterView"),u=Jl,p=Vt;return y(),P(p,{namespace:"el",locale:b(a)},{default:l(()=>[e(u,null,{default:l(()=>[e(c)]),_:1})]),_:1},8,["locale"])}}}),aa=z(la,[["__scopeId","data-v-2cae7594"]]),oa=()=>H(()=>import("./index2.js"),__vite__mapDeps([0]),import.meta.url),na=[{component:oa,path:"/flow",name:"flow",redirect:"/flow/index",children:[{component:()=>H(()=>import("./index3.js"),__vite__mapDeps([0,1]),import.meta.url),path:"index",name:"flow-index"}]}],sa=Object.freeze(Object.defineProperty({__proto__:null,default:na},Symbol.toStringTag,{value:"Module"}));function ra(n){n.beforeEach((t,a,r)=>{r()}),n.afterEach((t,a,r)=>{Dt(r)&&console.log(r.message)}),n.onError(t=>{console.log(t,"路由错误")})}const qe=Object.assign({"./modules/flow.ts":sa}),ia=Object.keys(qe).reduce((n,t)=>{const a=qe[t].default??{},r=Array.isArray(a)?[...a]:[a];return[...n,...r]},[]),ua={path:"/",name:"Root",redirect:"flow"},da=[ua,...ia],ye=Et({history:Pt(),routes:da,strict:!0,scrollBehavior:()=>({left:0,top:0})});function ca(n){n.use(ye),ra(ye)}const et=kt();et.use(Ct);function pa(n){n.use(et)}const ma={common:{submit:"Submit",cancel:"Cancel",useFileStart:"Select File Preview | Edit",export:"Export",fileOperation:"File Operation",nodeSetting:"Node Setting",baseSetting:"Base Setting",readonlyModel:"Readonly Model",editableModel:"Editable Model",lang:{chinese:"中文",english:"english"}},flow:{start:{default:"Initiator"},header:{title:"Flow Low Code",description:"Welcome to the Flow Low Code platform."},tool:{zoomIn:"Zoom In",zoomOut:"Zoom Out"}},form:{field:"Field",required:"Required",hidden:"Hidden",readonly:"Readonly",permissions:"Form Permissions"}},_a=Object.freeze(Object.defineProperty({__proto__:null,default:ma},Symbol.toStringTag,{value:"Module"})),fa={common:{submit:"提交",cancel:"取消",useFileStart:"选择文件预览|编辑",export:"导出",fileOperation:"文件操作",readonlyModel:"只读模式",editableModel:"编辑模式",nodeSetting:"节点设置",baseSetting:"基础设置",lang:{chinese:"中文",english:"english"}},flow:{start:{default:"发起人"},header:{title:"流程低代码",description:"欢迎使用流程低代码平台。"},tool:{zoomIn:"放大",zoomOut:"缩小"}},form:{field:"字段",required:"必填",hidden:"隐藏",readonly:"只读",permissions:"表单权限"}},va=Object.freeze(Object.defineProperty({__proto__:null,default:fa},Symbol.toStringTag,{value:"Module"})),ba=Object.assign({"./lang/en.ts":_a,"./lang/zh.ts":va}),ha=Object.entries(ba).reduce((n,[t,a])=>{const r=t.match(/\.\/lang\/(.*)\.ts/)[1];return n[r]=a.default,n},{}),ga=Ut({legacy:!1,locale:ge.get("lang",navigator.language),messages:ha}),ya=n=>{n.use(ga)},ve=[{id:1,name:"张三",username:"admin",avatar:"https://avatars.githubusercontent.com/u/44080404?v=4"},{id:2,name:"李四",username:"lisi",avatar:"https://avatars.githubusercontent.com/u/44080404?v=4"},{id:3,name:"王五",username:"wangwu",avatar:"https://avatars.githubusercontent.com/u/44080404?v=4"},{id:4,name:"赵六",username:"zhaoliu",avatar:"https://avatars.githubusercontent.com/u/44080404?v=4"},{id:5,name:"孙七",username:"sunqi",avatar:"https://avatars.githubusercontent.com/u/44080404?v=4"},{id:6,name:"周八",username:"zhouba",avatar:"https://avatars.githubusercontent.com/u/44080404?v=4"},{id:7,name:"吴九",username:"wujui",avatar:"https://avatars.githubusercontent.com/u/44080404?v=4"},{id:8,name:"郑十",username:"zhengshi",avatar:"https://avatars.githubusercontent.com/u/44080404?v=4"}],Va=[{url:"/api/user/info",method:"get",response:n=>{const t=n.query.username;return{code:200,success:!0,message:"操作成功",data:ve.find(a=>a.username===t)}}},{url:"/api/user/list",method:"post",response:n=>{const t=n.body.userIds;return{code:200,success:!0,message:"操作成功",data:Array.isArray(t)?ve.filter(a=>t.includes(a.username)):ve}}}],be=[{id:"1",name:"项目经理"},{id:"2",name:"产品经理"},{id:"3",name:"高级开发工程师"},{id:"4",name:"中级开发工程师"},{id:"5",name:"项目总监"},{id:"6",name:"产品策划"},{id:"7",name:"客服"},{id:"8",name:"销售经理"}],Da=[{url:"/api/role/info",method:"get",response:n=>{const t=n.query.id;return{code:200,success:!0,message:"操作成功",data:be.find(a=>a.id===t)}}},{url:"/api/role/list",method:"post",response:n=>{const t=n.body.roleIds;return{code:200,success:!0,message:"操作成功",data:Array.isArray(t)?be.filter(a=>t.includes(a.id)):be}}}],Ea=[...Va,...Da];function Pa(){$t(Ea)}async function ka(){const n=St(aa);for(const[t,a]of Object.entries(Rt))n.component(t,a);pa(n),ya(n),ca(n),await ye.isReady(),n.mount("#app",!0)}ka();Pa();export{Zl as L,Ua as T,z as _,Gt as a,Hl as b,ea as c,At as g,ge as s,ta as u};
